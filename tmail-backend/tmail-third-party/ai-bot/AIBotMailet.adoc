= AIBotMailet

`AIBotMailet` is a mailet designed to automatically reply to emails sent to a specific recipient (e.g., gpt@linagora.com). It uses the OpenAI API by default but can be configured to use any LLM API supported by https://github.com/langchain4j/[langchain4j].

== Configuration Example

The `mailetcontainer.xml` file should be configured as follows:

[source,xml]
----
<matcher name="aibot-allowed" match="org.apache.james.mailetcontainer.impl.matchers.And">
      <matcher match="SenderIsLocal"/>
      <matcher match="com.linagora.tmail.mailet.RecipientsContain=gpt@example.com"/>
</matcher>
...

<mailet match="All" class="com.linagora.tmail.mailets.TmailLocalDelivery">
      <consume>false</consume>
</mailet>
<mailet match="aibot-allowed" class="com.linagora.tmail.mailet.AIBotMailet">
      <botAddress>gpt@example.com</botAddress>
</mailet>
<mailet match="All" class="Null"/>
----

The API-specific parameters should be put in the `ai.properties` configuration:
[source,properties]
----
apiKey=demo
model=lucie
baseURL=https://chat.lucie.example.com
----

=== Parameters

* `botAddress`: The email address used to send replies generated by the LLM.
* `apiKey`: The API key for accessing the LLM API service.
* `baseURL`: The URL of an LLM API compatible with OpenAI, e.g. https://ai.linagora.com/api. If left blank, defaults to the official OpenAI API base URL.
* `model`: The identifier of the LLM that generates the replies. Defaults to `gpt-4o-mini`.