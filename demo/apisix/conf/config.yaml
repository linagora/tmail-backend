deployment:
  role: data_plane
  role_data_plane:
    config_provider: yaml

ext-plugin:
  path_for_test: /tmp/runner.sock
  cmd: ['java', '-jar', '-DREDIS_URL=redis://secret1@redis.example.com:6379', '-Xmx1g', '-Xms1g', '/usr/local/apisix/token_revoker_plugin.jar']

apisix:
  enable_admin: false
  stream_proxy: # TCP/UDP proxy
    only: false # To enable stream proxy
    tcp:
      - 143
      - 993
  proxy_protocol:
    enable_tcp_pp_to_upstream: true # Enables the proxy protocol to the upstream server

nginx_config:
  # Configure NGINX proxy_timeout
  # Sets the timeout between two successive read or write operations on client or proxied server connections. If no data is transmitted within this time, the connection is closed.
  stream_configuration_snippet: |
    proxy_timeout 30m;